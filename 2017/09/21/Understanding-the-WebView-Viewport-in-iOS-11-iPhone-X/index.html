<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="viewport-fit,iOS 11," />





  <link rel="alternate" href="/atom.xml" title="Deng's Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.png?v=5.0.2" />






<meta name="description" content="åŒ—äº¬æ—¶é—´ 9 æœˆ 12 æ—¥å‡Œæ™¨ï¼Œè‹¹æœåœ¨ä¹”å¸ƒæ–¯å‰§é™¢å‘å¸ƒäº† iPhone Xã€‚iPhone X æ­£é¢çš„å…¨é¢å±ä¸Šæ–¹æœ‰ä¸€æ¡åˆ˜æµ·ï¼Œå¯¹äºå¦‚ä½•é€‚é… iPhone Xï¼Œè‹¹æœçš„ Human Interface Guidelines æ–‡æ¡£å·²ç»ç»™å‡ºè¯¦ç»†çš„è¯´æ˜ã€‚ è‹¹æœå¯¹äº iPhone X çš„è®¾è®¡å¸ƒå±€æ„è§å¦‚ä¸‹ï¼šæ ¸å¿ƒå†…å®¹åº”è¯¥å¤„äº Safe area ç¡®ä¿ä¸ä¼šè¢«è®¾å¤‡åœ†è§’(corners)ï¼Œä¼ æ„Ÿå™¨å¤–å£³(sensor housi">
<meta name="keywords" content="viewport-fit,iOS 11">
<meta property="og:type" content="article">
<meta property="og:title" content="å‰–æ iOS 11 ç½‘é¡µé€‚é…é—®é¢˜">
<meta property="og:url" content="http://objcer.com/2017/09/21/Understanding-the-WebView-Viewport-in-iOS-11-iPhone-X/index.html">
<meta property="og:site_name" content="Deng&#39;s Blog">
<meta property="og:description" content="åŒ—äº¬æ—¶é—´ 9 æœˆ 12 æ—¥å‡Œæ™¨ï¼Œè‹¹æœåœ¨ä¹”å¸ƒæ–¯å‰§é™¢å‘å¸ƒäº† iPhone Xã€‚iPhone X æ­£é¢çš„å…¨é¢å±ä¸Šæ–¹æœ‰ä¸€æ¡åˆ˜æµ·ï¼Œå¯¹äºå¦‚ä½•é€‚é… iPhone Xï¼Œè‹¹æœçš„ Human Interface Guidelines æ–‡æ¡£å·²ç»ç»™å‡ºè¯¦ç»†çš„è¯´æ˜ã€‚ è‹¹æœå¯¹äº iPhone X çš„è®¾è®¡å¸ƒå±€æ„è§å¦‚ä¸‹ï¼šæ ¸å¿ƒå†…å®¹åº”è¯¥å¤„äº Safe area ç¡®ä¿ä¸ä¼šè¢«è®¾å¤‡åœ†è§’(corners)ï¼Œä¼ æ„Ÿå™¨å¤–å£³(sensor housi">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/iphone-x-safe-area.png">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/424F6040-3325-4AD5-8683-6D55AE4D9BEA.png">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/47C98605-A351-4903-BDC7-C1E6878D0485.png">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/viewport-fit.png">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/Screen-Shot-2017-09-14-at-14.19.31.png">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/0C3B9577-094E-411C-9ED3-AA481FA3A50A.png">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/Screen-Shot-2017-09-14-at-14.07.11-1.png">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/iPhone%206s.gif">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/iPhone%20X.gif">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/status-bar-problem.png">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/2B17E02C-7C0C-4282-9369-F5E6D1C75836.png">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/FCF9D371-F2B5-44FE-9FFC-DC991E39FD2C.png">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/css-funciton-min-max.png">
<meta property="og:updated_time" content="2017-11-05T15:24:08.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å‰–æ iOS 11 ç½‘é¡µé€‚é…é—®é¢˜">
<meta name="twitter:description" content="åŒ—äº¬æ—¶é—´ 9 æœˆ 12 æ—¥å‡Œæ™¨ï¼Œè‹¹æœåœ¨ä¹”å¸ƒæ–¯å‰§é™¢å‘å¸ƒäº† iPhone Xã€‚iPhone X æ­£é¢çš„å…¨é¢å±ä¸Šæ–¹æœ‰ä¸€æ¡åˆ˜æµ·ï¼Œå¯¹äºå¦‚ä½•é€‚é… iPhone Xï¼Œè‹¹æœçš„ Human Interface Guidelines æ–‡æ¡£å·²ç»ç»™å‡ºè¯¦ç»†çš„è¯´æ˜ã€‚ è‹¹æœå¯¹äº iPhone X çš„è®¾è®¡å¸ƒå±€æ„è§å¦‚ä¸‹ï¼šæ ¸å¿ƒå†…å®¹åº”è¯¥å¤„äº Safe area ç¡®ä¿ä¸ä¼šè¢«è®¾å¤‡åœ†è§’(corners)ï¼Œä¼ æ„Ÿå™¨å¤–å£³(sensor housi">
<meta name="twitter:image" content="http://7vikhl.com1.z0.glb.clouddn.com/iphone-x-safe-area.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    }
  };
</script>




  <link rel="canonical" href="http://objcer.com/2017/09/21/Understanding-the-WebView-Viewport-in-iOS-11-iPhone-X/"/>


  <title> å‰–æ iOS 11 ç½‘é¡µé€‚é…é—®é¢˜ | Deng's Blog </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Deng's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Work Smart, Enjoy Life!</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                å‰–æ iOS 11 ç½‘é¡µé€‚é…é—®é¢˜
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2017-09-21T15:55:40+08:00" content="2017-09-21">
              2017-09-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/CSS/" itemprop="url" rel="index">
                    <span itemprop="name">CSS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/09/21/Understanding-the-WebView-Viewport-in-iOS-11-iPhone-X/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/09/21/Understanding-the-WebView-Viewport-in-iOS-11-iPhone-X/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/09/21/Understanding-the-WebView-Viewport-in-iOS-11-iPhone-X/" class="leancloud_visitors" data-flag-title="å‰–æ iOS 11 ç½‘é¡µé€‚é…é—®é¢˜">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>åŒ—äº¬æ—¶é—´ 9 æœˆ 12 æ—¥å‡Œæ™¨ï¼Œè‹¹æœåœ¨ä¹”å¸ƒæ–¯å‰§é™¢å‘å¸ƒäº† iPhone Xã€‚iPhone X æ­£é¢çš„å…¨é¢å±ä¸Šæ–¹æœ‰ä¸€æ¡åˆ˜æµ·ï¼Œå¯¹äºå¦‚ä½•é€‚é… iPhone Xï¼Œè‹¹æœçš„ <a href="https://developer.apple.com/ios/human-interface-guidelines/overview/iphone-x/" target="_blank" rel="external">Human Interface Guidelines</a> æ–‡æ¡£å·²ç»ç»™å‡ºè¯¦ç»†çš„è¯´æ˜ã€‚</p>
<p>è‹¹æœå¯¹äº iPhone X çš„è®¾è®¡å¸ƒå±€æ„è§å¦‚ä¸‹ï¼š<br><img src="http://7vikhl.com1.z0.glb.clouddn.com/iphone-x-safe-area.png" alt=""><br>æ ¸å¿ƒå†…å®¹åº”è¯¥å¤„äº <strong>Safe area</strong> ç¡®ä¿ä¸ä¼šè¢«è®¾å¤‡åœ†è§’(corners)ï¼Œä¼ æ„Ÿå™¨å¤–å£³(sensor housingï¼Œé½åˆ˜æµ·) ä»¥åŠåº•éƒ¨çš„ Home Indicator é®æŒ¡ã€‚</p>
<p>æœ¬æ–‡å°†å‰–æä¸¤åˆ™åœ¨  iPhone X å¼‚å½¢å±å’Œ iOS 11 ç½‘é¡µé€‚é…ä¸­é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆã€‚<br><a id="more"></a></p>
<h2 id="iPhone-X-Safari-æ¨ªå±æ˜¾ç¤ºå·¦å³ç™½è¾¹é—®é¢˜"><a href="#iPhone-X-Safari-æ¨ªå±æ˜¾ç¤ºå·¦å³ç™½è¾¹é—®é¢˜" class="headerlink" title="iPhone X Safari æ¨ªå±æ˜¾ç¤ºå·¦å³ç™½è¾¹é—®é¢˜"></a>iPhone X Safari æ¨ªå±æ˜¾ç¤ºå·¦å³ç™½è¾¹é—®é¢˜</h2><p>iPhone X Safari åœ¨æ¨ªå±çŠ¶æ€ä¸‹ï¼Œç½‘é¡µå·¦å³ä¸¤ä¾§å¯èƒ½ä¼šå‡ºç°ç™½è¾¹ï¼Œå¦‚ä¸‹ï¼š<br><img src="http://7vikhl.com1.z0.glb.clouddn.com/424F6040-3325-4AD5-8683-6D55AE4D9BEA.png" alt=""></p>
<p>å› ä¸º iPhone X ä¼šå°†ç½‘é¡µå†…å®¹æ˜¾ç¤ºåœ¨ Safe area å¯¼è‡´çš„ï¼Œè§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å°†èƒŒæ™¯é¢œè‰²å¡«å……æ•´ä¸ªå±å¹•åŒºåŸŸï¼Œè€Œç½‘é¡µå†…å®¹å¤„äº Safe areaã€‚<br><img src="http://7vikhl.com1.z0.glb.clouddn.com/47C98605-A351-4903-BDC7-C1E6878D0485.png" alt=""></p>
<h3 id="è§£å†³æ–¹æ¡ˆä¸€ï¼šbackground-color"><a href="#è§£å†³æ–¹æ¡ˆä¸€ï¼šbackground-color" class="headerlink" title="è§£å†³æ–¹æ¡ˆä¸€ï¼šbackground-color"></a>è§£å†³æ–¹æ¡ˆä¸€ï¼š<code>background-color</code></h3><p>å¦‚æœç½‘é¡µè®¾ç½®äº†ä¸€ä¸ªèƒŒæ™¯é¢œè‰²ï¼Œé‚£ä¹ˆæœ€ç®€å•è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œåœ¨ <code>body</code> èŠ‚ç‚¹è®¾ç½® <code>background-color</code>ï¼Œä½¿èƒŒæ™¯é¢œè‰²å¡«å……æ•´ä¸ªå±å¹•ï¼Œä»è€Œè§£å†³æ¨ªå±æ˜¾ç¤ºå·¦å³ç™½è¾¹çš„é—®é¢˜</p>
<h3 id="è§£å†³æ–¹æ¡ˆäºŒï¼šviewport-fit-safe-area-inset"><a href="#è§£å†³æ–¹æ¡ˆäºŒï¼šviewport-fit-safe-area-inset" class="headerlink" title="è§£å†³æ–¹æ¡ˆäºŒï¼šviewport-fit + safe-area-inset-*"></a>è§£å†³æ–¹æ¡ˆäºŒï¼š<code>viewport-fit</code> + <code>safe-area-inset-*</code></h3><p>åœ¨ iOS 11 ä¸­è‹¹æœä¸º Web æ–°å¢ä¸¤ä¸ªå†…å®¹ <code>viewport-fit</code> + <code>safe-area-inset-*</code></p>
<blockquote>
<p>â—ï¸æ³¨æ„ï¼š<code>viewport-fit</code> å’Œ <code>safe-area-inset-*</code> åªå¯¹äº WKWebView æœ‰æ•ˆï¼Œåœ¨ UIWebView ä¸­æ— æ•ˆ</p>
</blockquote>
<p>1ï¸âƒ£ã€<code>viewport-fit</code> ç”¨äºè®¾ç½®ç½‘é¡µåœ¨å¯è§†çª—å£çš„å¸ƒå±€æ–¹å¼</p>
<blockquote>
<p>æ–‡æ¡£ï¼š<a href="https://drafts.csswg.org/css-round-display/#viewport-fit-descriptor" target="_blank" rel="external">CSS Round Display Spec</a></p>
</blockquote>
<p>è¿™ä¸ªå±æ€§å¯è®¾ç½®ä¸ºï¼š</p>
<ul>
<li><code>contain</code>: The viewport should fully contain the web content. å¯è§†çª—å£å®Œå…¨åŒ…å«ç½‘é¡µå†…å®¹</li>
<li><code>cover</code>: The web content should fully cover the viewport.  ç½‘é¡µå†…å®¹å®Œå…¨è¦†ç›–å¯è§†çª—å£</li>
<li><code>auto</code>: The default value, <code>contain</code></li>
</ul>
<p>å¯¹äº iPhone X ä¹‹å‰çš„ iPhone è®¾å¤‡å±å¹•ä¸ºè§„åˆ™çš„çŸ©å½¢ï¼Œç½‘é¡µå†…å®¹éƒ½å¯ä»¥å®Œæ•´å±•ç¤ºï¼›ä½†æ˜¯å¯¹äº iPhone X æ˜¯å¼‚å½¢å±å¹•ï¼Œé€šè¿‡ <code>viewport-fit</code> å¯ä»¥è®¾ç½®ç½‘é¡µå†…å®¹åœ¨å¯è§†çª—å£ä¸­çš„æ˜¾ç¤ºè§„åˆ™ï¼Œé€šè¿‡ä¸‹å›¾å¯ä»¥è¾…åŠ©ç†è§£<br><img src="http://7vikhl.com1.z0.glb.clouddn.com/viewport-fit.png" alt=""></p>
<p>æˆ‘ä»¬çŸ¥é“é»˜è®¤æƒ…å†µä¸‹ <code>viewport-fit=auto</code> å³ä¸º <code>viewport-fit=contain</code>ï¼Œåœ¨ iPhone X ä¸­ï¼Œç›¸å½“äºç½‘é¡µå†…å®¹å±•ç¤ºåœ¨ Safe areaï¼Œè¿™æ ·ä¹Ÿå°±æ˜¯æ¨ªå±æ˜¾ç¤ºæ—¶å‡ºç°ç™½è¾¹çš„åŸå› äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¾ç½® <code>viewport-fit=cover</code> å³å¯è§£å†³é—®é¢˜<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;meta <span class="attribute">name</span>=<span class="string">"viewport"</span> <span class="attribute">content</span>=<span class="string">"width=device-width, initial-scale=1.0, viewport-fit=cover"</span>&gt;</div></pre></td></tr></table></figure></p>
<p><img src="http://7vikhl.com1.z0.glb.clouddn.com/Screen-Shot-2017-09-14-at-14.19.31.png" alt=""></p>
<p>æ³¨æ„åˆ°åº”ç”¨ <code>viewport-fit=cover</code> ä¹‹åï¼Œç½‘é¡µå³ä¸Šè§’ï¼Œmenu æŒ‰é”®å’Œ in æŒ‰é”®è¢«åœ†è§’ï¼Œä¼ æ„Ÿå™¨å¤–å£³ï¼ˆé½åˆ˜æµ·ï¼‰è£å‰ªæ‰äº† ğŸ˜²</p>
<p>2ï¸âƒ£ã€<code>safe-area-inset-*</code><br><strong>åœ¨è®¾ç½® <code>viewport-fit=cover</code> ä¹‹å</strong>ï¼ŒWeb ä¸­ä¼šæ–°å¢å››ä¸ªå¸¸é‡ï¼š</p>
<ul>
<li>safe-area-inset-top</li>
<li>safe-area-inset-right</li>
<li>safe-area-inset-left</li>
<li>safe-area-inset-bottom</li>
</ul>
<p>åˆ†åˆ«è¡¨ç¤º Safe area å’Œå¯è§†çª—å£ viewport é¡¶éƒ¨ï¼Œå³è¾¹ï¼Œå·¦è¾¹ï¼Œåº•éƒ¨çš„é—´è·ï¼Œå¯ä»¥ç”¨äºè®¾ç½® <code>margin</code>, <code>padding</code>, æˆ–è€…ç»å¯¹å®šä½æ—¶ <code>left</code>, <code>top</code></p>
<blockquote>
<p>â—ï¸æ³¨æ„ï¼šåœ¨æ¨ªå±å’Œç«–å±çŠ¶æ€ä¸‹ï¼Œ<code>safe-area-inset-*</code> çš„å€¼ä¸åŒ</p>
</blockquote>
<p><img src="http://7vikhl.com1.z0.glb.clouddn.com/0C3B9577-094E-411C-9ED3-AA481FA3A50A.png" alt=""></p>
<p>ä¸ºäº†è§£å†³åº”ç”¨ <code>viewport-fit=cover</code> ä¹‹åï¼Œæœ‰äº›æ˜¾ç¤ºå†…å®¹è¢«è£å‰ªçš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ è¾¹è·ä½¿å¾—ç½‘é¡µä¸»è¦å†…å®¹å¤„äº Safe area ä¸­ä¸è¢«è£å‰ªï¼Œè§£å†³æ–¹å¼å¦‚ä¸‹ï¼š<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">padding</span>: constant(safe-<span class="meta">area</span>-inset-top) constant(safe-<span class="meta">area</span>-inset-right) constant(safe-<span class="meta">area</span>-inset-<span class="keyword">bottom) </span>constant(safe-<span class="meta">area</span>-inset-left)<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<p><img src="http://7vikhl.com1.z0.glb.clouddn.com/Screen-Shot-2017-09-14-at-14.07.11-1.png" alt=""></p>
<h2 id="iOS-11-WebView-ä¸­çŠ¶æ€æ é—®é¢˜"><a href="#iOS-11-WebView-ä¸­çŠ¶æ€æ é—®é¢˜" class="headerlink" title="iOS 11 WebView ä¸­çŠ¶æ€æ é—®é¢˜"></a>iOS 11 WebView ä¸­çŠ¶æ€æ é—®é¢˜</h2><p><strong>é—®é¢˜æè¿°ï¼š</strong><br>åœ¨ iOS 11 ç”±äº safe areaï¼ŒçŠ¶æ€æ çš„è¡¨ç°æœ‰ç‚¹ä¸åŒã€‚å¦‚æœé¡µé¢é¡¶éƒ¨æœ‰ä¸€ä¸ª header barï¼Œè®¾ç½® <code>position: fixed; top: 0px;</code> é‚£ä¹ˆé¡µé¢æ»šåŠ¨è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°å¦‚ä¸‹é—®é¢˜ï¼š<br><img src="http://7vikhl.com1.z0.glb.clouddn.com/iPhone%206s.gif" alt="iPhone 6S"><br><img src="http://7vikhl.com1.z0.glb.clouddn.com/iPhone%20X.gif" alt="iPhone X"></p>
<p>header bar æ²¡æœ‰å›ºå®šåœ¨æœ€é¡¶éƒ¨ï¼Œä¸Šä¸‹æ»šåŠ¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç½‘é¡µå†…å®¹ä» status bar ä¸‹æ–¹ç©¿è¿‡<br><img src="http://7vikhl.com1.z0.glb.clouddn.com/status-bar-problem.png" alt=""></p>
<p><strong>é‡ç°é—®é¢˜ï¼š</strong><br>åˆ›å»ºä¸€ä¸ª iOS é¡¹ç›®ï¼Œè§†å›¾ä¸­æ·»åŠ ä¸€ä¸ª <code>WKWebView</code>ï¼ŒåŠ è½½ç™¾åº¦é¦–é¡µ<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">  [<span class="keyword">super</span> viewDidLoad];</div><div class="line">  <span class="comment">// Do any additional setup after loading the view, typically from a nib.</span></div><div class="line">  <span class="built_in">WKWebView</span> *webView = [[<span class="built_in">WKWebView</span> alloc] initWithFrame:<span class="keyword">self</span>.view.bounds];</div><div class="line">  [webView loadRequest:[<span class="built_in">NSURLRequest</span> requestWithURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"https://www.baidu.com"</span>]]];</div><div class="line">  [<span class="keyword">self</span>.view addSubview:webView];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>å‰–æé—®é¢˜ï¼š</strong><br>1ã€è¿™ä¸ªé—®é¢˜åŒæ ·ä¹Ÿæ˜¯ç”±äº safe area å¯¼è‡´ï¼Œè™½ç„¶ header bar ä½ç½®ä¿¡æ¯ä¸º <code>position: fixed; top: 0px;</code>ï¼Œä½†è¿™ä¸ªä½ç½®ä¹Ÿæ˜¯ç›¸å¯¹äº safe area è€Œè¨€çš„ï¼Œæ‰€ä»¥çœ‹åˆ° header bar å¹¶æ²¡æœ‰ä½äºå±å¹•æœ€é¡¶éƒ¨ã€‚ğŸ‘‰ åœ¨ viewport meta æ ‡ç­¾ï¼Œæ·»åŠ  <code>viewport-fit=cover</code> å³å¯è§£å†³æ­¤é—®é¢˜<br><img src="http://7vikhl.com1.z0.glb.clouddn.com/2B17E02C-7C0C-4282-9369-F5E6D1C75836.png" alt=""></p>
<p>2ã€è™½ç„¶ header bar å›ºå®šåˆ°å±å¹•æœ€ä¸Šæ–¹ï¼Œä½†æ˜¯å¾ˆæ˜æ˜¾åœ¨ iPhone X ä¸­å´è¢«åœ†è§’å’Œé½åˆ˜æµ·è£å‰ªäº†å†…å®¹ï¼Œè¿™æ€ä¹ˆåŠå‘¢ï¼ŸğŸ‘‰ ä¸º header bar æ·»åŠ  <code>padding-top</code> å³å¯è§£å†³æ­¤é—®é¢˜<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">header</span> &#123;</div><div class="line">  <span class="comment">/* ... */</span></div><div class="line"></div><div class="line">  <span class="comment">/* Status bar height on iOS 10 */</span></div><div class="line">  <span class="attribute">padding-top</span>: <span class="number">20px</span>;</div><div class="line"></div><div class="line">  <span class="comment">/* Status bar height on iOS 11+ */</span></div><div class="line">  <span class="attribute">padding-top</span>: <span class="built_in">constant</span>(safe-area-inset-top);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://7vikhl.com1.z0.glb.clouddn.com/FCF9D371-F2B5-44FE-9FFC-DC991E39FD2C.png" alt=""></p>
<h2 id="æ›´æ–°å†…å®¹"><a href="#æ›´æ–°å†…å®¹" class="headerlink" title="æ›´æ–°å†…å®¹"></a>æ›´æ–°å†…å®¹</h2><blockquote>
<p><strong>Webkit æ–‡æ¡£</strong> <a href="https://webkit.org/blog/7929/designing-websites-for-iphone-x/" target="_blank" rel="external">Designing Websites for iPhone X</a></p>
</blockquote>
<h3 id="CSS-function-env"><a href="#CSS-function-env" class="headerlink" title="CSS function env()"></a>CSS function <code>env()</code></h3><blockquote>
<p>The env() function shipped in iOS 11 with the name constant(). Beginning with Safari Technology Preview 41 and the iOS 11.2 beta, constant() has been removed and replaced with env(). You can use the CSS fallback mechanism to support both versions, if necessary, but should prefer env() going forward.</p>
</blockquote>
<p><strong>Webkit åœ¨ iOS 11 ä¸­æ–°å¢ CSS functionï¼š<code>env()</code> æ›¿ä»£ <code>constant()</code></strong>ï¼Œæ–‡æ¡£ä¸­æ¨èä½¿ç”¨ <code>env()</code>ï¼Œè€Œ <code>constant()</code> ä» Safari Technology Preview 41 å’Œ iOS 11.2 beta å¼€å§‹ä¼šè¢«åºŸå¼ƒã€‚<code>env()</code> ç”¨æ³•å¦‚åŒ <code>var()</code>ï¼Œåœ¨ä¸æ”¯æŒçš„ <code>env()</code> çš„æµè§ˆå™¨ä¸­ï¼Œä¼šè‡ªåŠ¨å¿½ç•¥è¿™ä¸€æ ·å¼è§„åˆ™ï¼Œä¸å½±å“ç½‘é¡µæ­£å¸¸å±•ç¤ºï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.post</span> &#123;</div><div class="line">  <span class="attribute">padding</span>: <span class="number">12px</span>;</div><div class="line">  <span class="attribute">padding-left</span>: <span class="built_in">env</span>(safe-area-inset-left);</div><div class="line">  <span class="attribute">padding-right</span>: <span class="built_in">env</span>(safe-area-inset-right);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="CSS-function-min-å’Œ-max"><a href="#CSS-function-min-å’Œ-max" class="headerlink" title="CSS function min() å’Œ max()"></a>CSS function <code>min()</code> å’Œ <code>max()</code></h3><p>åœ¨ iPhone X è®¾å¤‡è®¾ç½®ç½‘é¡µè¾¹è·çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å½¢ï¼šæˆ‘ä»¬é€šè¿‡ <code>env(safe-area-inset-left)</code> å’Œ <code>env(safe-area-inset-right)</code> è®¾ç½®äº†é¡µé¢å±•ç¤ºå·¦å³è¾¹è·ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.post</span> &#123;</div><div class="line">  <span class="attribute">padding-left</span>: <span class="built_in">env</span>(safe-area-inset-left);</div><div class="line">  <span class="attribute">padding-right</span>: <span class="built_in">env</span>(safe-area-inset-right);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>åœ¨æ¨ªå±çŠ¶æ€ä¸‹æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†æ˜¯åœ¨ç«–å±çŠ¶æ€ä¸‹ï¼Œå¸¸é‡ <code>safe-area-inset-left</code> å’Œ <code>safe-area-inset-right</code> éƒ½ä¸º 0ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´é¡µé¢å±•ç¤ºå·¦å³è¾¹è·ä¸º <code>0px</code>ï¼Œå¦‚ä¸‹å›¾å·¦ï¼Œæ­£å¸¸æƒ…å†µåº”è¯¥æ˜¯å¦‚ä¸‹å›¾å³ï¼Œç«–å±çŠ¶æ€ä¸‹é¡µé¢å·¦å³ä¹Ÿæœ‰è¾¹è·ã€‚</p>
<p><img src="http://7vikhl.com1.z0.glb.clouddn.com/css-funciton-min-max.png" alt=""></p>
<p>Webkit ä» Safari Technology Preview 41 å’Œ iOS 11.2 beta å¼€å§‹ï¼Œæ–°å¢ CSS functionï¼š<code>min()</code> å’Œ <code>max()</code>ï¼Œè¿™ä¸¤ä¸ªå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚</p>
<blockquote>
<p>Both functions take an arbitrary number of arguments and return the minimum or maximum. They can be used inside of calc(), or nested inside each other, and both functions allow calc()-like math inside of them.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@supports(padding: <span class="built_in">max</span>(0px)) &#123;</div><div class="line">  .post &#123;</div><div class="line">    padding-<span class="keyword">left</span>: <span class="built_in">max</span>(12px, env(safe-area-inset-<span class="keyword">left</span>));</div><div class="line">    padding-<span class="keyword">right</span>: <span class="built_in">max</span>(12px, env(safe-area-inset-<span class="keyword">right</span>));</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>â—ï¸æ­¤å¤„éœ€è¦ä½¿ç”¨ <code>@supports</code> å»æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒ <code>min()</code> å’Œ <code>max()</code></p>
<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a href="https://developer.apple.com/ios/human-interface-guidelines/overview/iphone-x/" target="_blank" rel="external">Human Interface Guidelines-iPhone X</a><br><a href="http://stephenradford.me/removing-the-white-bars-in-safari-on-iphone-x/" target="_blank" rel="external">Removing the White Bars in Safari on iPhone X</a><br><a href="https://ayogo.com/blog/ios11-viewport/" target="_blank" rel="external">Understanding the WebView Viewport in iOS 11</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/viewport-fit/" rel="tag">#viewport-fit</a>
          
            <a href="/tags/iOS-11/" rel="tag">#iOS 11</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/09/06/Implementing-Promise/" rel="next" title="Implementing Promise">
                <i class="fa fa-chevron-left"></i> Implementing Promise
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/10/10/High-DPI-Canvas-Render/" rel="prev" title="é«˜æ¸…å±ä¸­ Canvas çš„ç»˜åˆ¶">
                é«˜æ¸…å±ä¸­ Canvas çš„ç»˜åˆ¶ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://7vikhl.com1.z0.glb.clouddn.com/avatar.jpg"
               alt="å°é‚“" />
          <p class="site-author-name" itemprop="name">å°é‚“</p>
          <p class="site-description motion-element" itemprop="description">Hello World</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">53</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">73</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/yingshandeng" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/objcer" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/2249439934" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#iPhone-X-Safari-æ¨ªå±æ˜¾ç¤ºå·¦å³ç™½è¾¹é—®é¢˜"><span class="nav-number">1.</span> <span class="nav-text">iPhone X Safari æ¨ªå±æ˜¾ç¤ºå·¦å³ç™½è¾¹é—®é¢˜</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#è§£å†³æ–¹æ¡ˆä¸€ï¼šbackground-color"><span class="nav-number">1.1.</span> <span class="nav-text">è§£å†³æ–¹æ¡ˆä¸€ï¼šbackground-color</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è§£å†³æ–¹æ¡ˆäºŒï¼šviewport-fit-safe-area-inset"><span class="nav-number">1.2.</span> <span class="nav-text">è§£å†³æ–¹æ¡ˆäºŒï¼šviewport-fit + safe-area-inset-*</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iOS-11-WebView-ä¸­çŠ¶æ€æ é—®é¢˜"><span class="nav-number">2.</span> <span class="nav-text">iOS 11 WebView ä¸­çŠ¶æ€æ é—®é¢˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ›´æ–°å†…å®¹"><span class="nav-number">3.</span> <span class="nav-text">æ›´æ–°å†…å®¹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CSS-function-env"><span class="nav-number">3.1.</span> <span class="nav-text">CSS function env()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CSS-function-min-å’Œ-max"><span class="nav-number">3.2.</span> <span class="nav-text">CSS function min() å’Œ max()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å‚è€ƒé“¾æ¥"><span class="nav-number">4.</span> <span class="nav-text">å‚è€ƒé“¾æ¥</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å°é‚“</span>
</div>

<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'objcer';
      var disqus_identifier = '2017/09/21/Understanding-the-WebView-Viewport-in-iOS-11-iPhone-X/';
      var disqus_title = "å‰–æ iOS 11 ç½‘é¡µé€‚é…é—®é¢˜";
      var disqus_url = 'http://objcer.com/2017/09/21/Understanding-the-WebView-Viewport-in-iOS-11-iPhone-X/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        var disqus_config = function () {
            this.page.url = disqus_url;
            this.page.identifier = disqus_identifier;
            this.page.title = disqus_title;
        };
        run_disqus_script('embed.js');
      
    </script>
  




  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("UaIz9QT8AVdqAXxUgypgPsTN-gzGzoHsz", "ONQFdHGRNex5wb5Aa64623Dw");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


</body>
</html>
